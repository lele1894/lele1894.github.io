<!DOCTYPE html>
<html>
<head>
    <title>YouTube Video Player</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        #youtube-player {
            flex: 1;
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <iframe id="youtube-player" src="" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen 
            onload="console.log('YouTube播放器加载成功')" 
            onerror="console.error('YouTube播放器加载失败'); document.getElementById('error-message').style.display='block';"></iframe>
        <div id="error-message" style="display:none; color:red; text-align:center; padding:20px;">
            <p>无法加载YouTube播放器，请检查网络连接或稍后重试。</p>
        </div>
    </div>

    <script>
        // 获取URL参数
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(window.location.href);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // 获取YouTube视频ID
        var videoId = getUrlParameter('v');
        
        // 如果有视频ID，则更新iframe的src
        if (videoId) {
            var iframe = document.getElementById('youtube-player');
            // 添加自动播放、静音和其他兼容性参数
            iframe.src = 'https://www.youtube.com/embed/' + videoId + '?autoplay=1';
            console.log('正在加载YouTube视频，ID: ' + videoId);
        } else {
            // 默认视频（可选）
            var iframe = document.getElementById('youtube-player');
            iframe.src = 'https://www.youtube.com/embed/j-xpSgXZT-4?autoplay=1';
            console.log('加载默认YouTube视频');
        }
        
        // 监听窗口大小变化，确保iframe填满容器
        window.addEventListener('resize', function() {
            var iframe = document.getElementById('youtube-player');
            iframe.style.width = '100%';
            iframe.style.height = '100%';
        });
    </script>
</body>

</html>
